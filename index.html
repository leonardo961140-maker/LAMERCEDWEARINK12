```html
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lamerced Wearink - Dise√±o de Camisetas y Sudaderas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Helvetica Neue', Arial, sans-serif;
        }
        
        body {
            background: url('https://i.postimg.cc/7LtVFQhy/Generated-Image-September-04-2025-1-24-PM.jpg') no-repeat center center fixed;
            background-size: cover;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 20px 30px;
            position: relative;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .logo-container {
            margin-bottom: 20px;
        }
        
        .logo {
            width: 300px;
            height: auto;
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .tagline {
            font-size: 1.4rem;
            color: #555;
            font-weight: 300;
            max-width: 600px;
            margin: 0 auto;
            letter-spacing: 1px;
        }
        
        .social-links {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }
        
        .social-link {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 3px solid white;
        }
        
        .whatsapp {
            background: #25D366;
        }
        
        .instagram {
            background: #e74c3c;
            background: linear-gradient(45deg, #f77737, #fd1d1d, #fcb045);
        }
        
        .social-link:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        .instagram-text {
            font-size: 0.9rem;
            color: #555;
            text-align: center;
            max-width: 120px;
            margin-top: 5px;
            line-height: 1.3;
            font-weight: 500;
        }
        
        .design-container {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            margin: 20px 0 40px;
            justify-content: center;
        }
        
        .upload-section {
            flex: 1;
            min-width: 300px;
            max-width: 500px;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid #e0e0e0;
        }
        
        .preview-section {
            flex: 1;
            min-width: 300px;
            max-width: 500px;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid #e0e0e0;
        }
        
        h2 {
            font-size: 1.8rem;
            color: #2c3e50;
            margin-bottom: 25px;
            font-weight: 600;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .upload-area {
            border: 3px dashed #3498db;
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }
        
        .upload-area:hover {
            border-color: #2980b9;
            background: #ebf5fb;
            transform: scale(1.02);
        }
        
        .upload-area.active {
            border-color: #2980b9;
            background: #ebf5fb;
            transform: scale(1.02);
        }
        
        .upload-icon {
            font-size: 3rem;
            color: #3498db;
            margin-bottom: 15px;
        }
        
        .upload-text {
            color: #7f8c8d;
            margin-bottom: 15px;
            font-weight: 500;
        }
        
        .upload-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        .upload-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.6);
        }
        
        input[type="file"] {
            display: none;
        }
        
        .preview-image-container {
            position: relative;
            width: 300px;
            height: 400px;
            margin: 0 auto;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            cursor: move;
            border: 3px solid #f0f0f0;
        }
        
        .preview-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .uploaded-design {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 150px;
            height: 150px;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            cursor: move;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 10;
            pointer-events: auto;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        }
        
        .uploaded-design.visible {
            opacity: 1;
        }
        
        .uploaded-design.dragging {
            cursor: grabbing;
            z-index: 20;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.3);
        }
        
        .no-design {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #7f8c8d;
            font-size: 1.1rem;
            text-align: center;
            pointer-events: none;
            background: rgba(255,255,255,0.8);
            padding: 10px 20px;
            border-radius: 5px;
            z-index: 1;
            border: 2px dashed #bdc3c7;
        }
        
        .controls {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            display: none;
            border: 1px solid #e0e0e0;
        }
        
        .controls.visible {
            display: block;
        }
        
        .control-group {
            margin-bottom: 15px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .slider {
            width: 100%;
            height: 5px;
            border-radius: 5px;
            background: #bdc3c7;
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .file-info {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            display: none;
            border: 1px solid #e0e0e0;
        }
        
        .file-info.visible {
            display: block;
        }
        
        .file-info h4 {
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .file-info p {
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .product-type-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .product-type-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            background: #ecf0f1;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 120px;
            color: #7f8c8d;
            border: 1px solid #bdc3c7;
        }
        
        .product-type-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            background: #dde1e3;
        }
        
        .product-type-btn.active {
            background: #3498db;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
            border: 1px solid #2980b9;
        }
        
        .color-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .color-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 20px;
            background: #ecf0f1;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 110px;
            color: #7f8c8d;
            border: 1px solid #bdc3c7;
        }
        
        .color-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            background: #dde1e3;
        }
        
        .color-btn.active {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            background: #3498db !important;
            color: white;
            border: 1px solid #2980b9;
        }
        
        .color-btn.white {
            background: #ffffff;
            color: #2c3e50;
            border: 1px solid #ddd;
        }
        
        .color-btn.black {
            background: #000;
            color: white;
        }
        
        .color-btn.gray {
            background: #888;
            color: white;
        }
        
        .color-btn.green {
            background: #2ecc71;
            color: white;
        }
        
        .color-btn.blue {
            background: #1e90ff;
            color: white;
        }
        
        .color-btn.red {
            background: #e74c3c;
            color: white;
        }
        
        .send-btn {
            background: #25D366;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 10px 20px rgba(37, 211, 102, 0.4);
        }
        
        .send-btn:hover {
            background: #128C7E;
            transform: translateY(-3px);
            box-shadow: 0 15px 25px rgba(37, 211, 102, 0.6);
        }
        
        .instructions {
            margin-top: 20px;
            padding: 15px;
            background: #d5f5e3;
            border-radius: 8px;
            font-size: 0.9rem;
            color: #27ae60;
            border: 1px solid #a9dfbf;
        }
        
        .trusted-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border: 1px solid #e0e0e0;
        }
        
        .trusted-badge i {
            font-size: 1.5rem;
            color: #3498db;
        }
        
        .trusted-badge-text {
            font-weight: 500;
            color: #2c3e50;
        }
        
        .video-section {
            margin: 40px 0;
            text-align: center;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid #e0e0e0;
        }
        
        .video-container {
            position: relative;
            overflow: hidden;
            width: 80%;
            height: 0;
            padding-bottom: 45%;
            margin: 20px auto;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        footer {
            text-align: center;
            padding: 40px 20px;
            color: #7f8c8d;
            font-size: 1rem;
            margin-top: 60px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid #e0e0e0;
        }
        
        footer p {
            margin-bottom: 10px;
        }
        
        /* Professional color palette */
        :root {
            --primary: #3498db;
            --primary-dark: #2980b9;
            --secondary: #2ecc71;
            --accent: #e74c3c;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --gray: #95a5a6;
        }
        
        @media (max-width: 768px) {
            .design-container {
                flex-direction: column;
            }
            
            .logo {
                width: 250px;
            }
            
            .preview-image-container {
                width: 250px;
                height: 330px;
            }
            
            .uploaded-design {
                width: 120px;
                height: 120px;
            }
            
            .social-links {
                top: 10px;
                right: 10px;
            }
            
            .social-link {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
            
            .product-type-buttons, .color-buttons {
                justify-content: center;
            }
            
            header {
                margin-bottom: 20px;
                padding: 30px 15px 20px;
            }
            
            .video-container {
                width: 95%;
                padding-bottom: 56.25%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="social-links">
                <a href="https://wa.me/34627157018" target="_blank" class="social-link whatsapp">üí¨</a>
                <a href="https://instagram.com/lamerced_wearink" target="_blank" class="social-link instagram">üì∏</a>
                <span class="instagram-text">¬°Visita nuestro Instagram y mira nuestros trabajos!</span>
            </div>
            <div class="logo-container">
                <a href="https://postimg.cc/CRzsnVWj" target="_blank">
                    <img src="https://i.postimg.cc/sgJ68jm0/logo1-jpg.png" alt="logo1-jpg" class="logo" border="0">
                </a>
            </div>
            <p class="tagline">Dise√±a tu camiseta personalizada - Tu estilo, tu identidad</p>
        </header>
        
        <div class="design-container">
            <div class="upload-section">
                <h2>Subir Dise√±o</h2>
                
                <div class="trusted-badge">
                    <div>üîí</div>
                    <div class="trusted-badge-text">100% Seguro y Confiable</div>
                </div>
                
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">üìÅ</div>
                    <p class="upload-text">Arrastra y suelta tu dise√±o aqu√≠</p>
                    <p class="upload-text">o</p>
                    <button class="upload-btn">Seleccionar archivo</button>
                    <input type="file" id="fileInput" accept="image/*">
                </div>
                
                <div class="file-info" id="fileInfo">
                    <h4>Archivo seleccionado:</h4>
                    <p><strong>Nombre:</strong> <span id="fileName">-</span></p>
                    <p><strong>Tipo:</strong> <span id="fileType">-</span></p>
                    <p><strong>Tama√±o:</strong> <span id="fileSize">-</span></p>
                </div>
                
                <div class="controls" id="controls">
                    <div class="control-group">
                        <label>Posici√≥n X</label>
                        <input type="range" min="0" max="300" value="150" class="slider" id="posX">
                    </div>
                    <div class="control-group">
                        <label>Posici√≥n Y</label>
                        <input type="range" min="0" max="400" value="200" class="slider" id="posY">
                    </div>
                    <div class="control-group">
                        <label>Tama√±o</label>
                        <input type="range" min="50" max="300" value="150" class="slider" id="size">
                    </div>
                </div>
                
                <div class="instructions">
                    <p>üí° Sube tu dise√±o, aj√∫stalo como desees y haz clic en "Enviar por WhatsApp" para compartirlo directamente.</p>
                </div>
                
                <button id="sendBtn" class="send-btn">
                    <span>üì§</span> Enviar por WhatsApp
                </button>
            </div>
            
            <div class="preview-section">
                <h2>Previsualizaci√≥n</h2>
                
                <!-- Product Type Selection -->
                <div class="product-type-buttons">
                    <button class="product-type-btn" id="tshirtBtn">Camiseta</button>
                    <button class="product-type-btn" id="hoodieBtn">Sudadera</button>
                </div>
                
                <!-- Color Selection -->
                <div class="color-buttons" id="colorButtons">
                    <!-- Colors will be populated dynamically based on product type -->
                </div>
                
                <div class="preview-image-container" id="previewContainer">
                    <img src="https://i.postimg.cc/N0Mz8tKn/1756857350.png" alt="Camiseta" class="preview-image" id="previewImage">
                    <div class="uploaded-design" id="uploadedDesign"></div>
                    <div class="no-design">Sube tu dise√±o para verlo aqu√≠</div>
                </div>
            </div>
        </div>
        
        <!-- Video Section -->
        <div class="video-section">
            <h2>Nuestro Proceso de Estampado</h2>
            <p>Descubre c√≥mo creamos tus dise√±os personalizados con la mejor calidad</p>
            <div class="video-container">
                <iframe src="https://player.vimeo.com/video/1115793581" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
        
        <footer>
            <p>Contacto: 627 157 018 | modisterialamerced@gmail.com</p>
            <p>Calle La V√≠a 1, Denia, Alicante</p>
            <p>¬© 2023 Lamerced Wearink - Estampado de camisetas personalizadas</p>
        </footer>
    </div>

    <script>
        // Elements
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const uploadedDesign = document.getElementById('uploadedDesign');
        const previewContainer = document.getElementById('previewContainer');
        const fileInfo = document.getElementById('fileInfo');
        const controls = document.getElementById('controls');
        const posX = document.getElementById('posX');
        const posY = document.getElementById('posY');
        const size = document.getElementById('size');
        const fileName = document.getElementById('fileName');
        const fileType = document.getElementById('fileType');
        const fileSize = document.getElementById('fileSize');
        const noDesign = document.querySelector('.no-design');
        const sendBtn = document.getElementById('sendBtn');
        const previewImage = document.getElementById('previewImage');
        const colorButtonsContainer = document.getElementById('colorButtons');
        
        const tshirtBtn = document.getElementById('tshirtBtn');
        const hoodieBtn = document.getElementById('hoodieBtn');
        
        let selectedFile = null;
        let isDragging = false;
        let offsetX = 0;
        let offsetY = 0;
        let currentProductType = 'tshirt';
        
        // Product configurations
        const products = {
            tshirt: {
                name: 'Camiseta',
                colors: {
                    white: {
                        name: 'Blanca',
                        url: 'https://i.postimg.cc/N0Mz8tKn/1756857350.png',
                        bg: '#ffffff'
                    },
                    black: {
                        name: 'Negra',
                        url: 'https://i.postimg.cc/G3YSxqpb/1756857397.png',
                        bg: '#000000'
                    },
                    gray: {
                        name: 'Gris',
                        url: 'https://i.postimg.cc/nhwkJDLd/1756857454.png',
                        bg: '#888888'
                    },
                    pink: {
                        name: 'Rosada',
                        url: 'https://i.postimg.cc/pdZdgDC7/freepik-assistant-1756855737469.png',
                        bg: '#ff69b4'
                    },
                    blue: {
                        name: 'Azul',
                        url: 'https://i.postimg.cc/Ssmpb3R7/1756856878.png',
                        bg: '#1e90ff'
                    },
                    red: {
                        name: 'Roja',
                        url: 'https://i.postimg.cc/VkSfKx0J/1756856759.png',
                        bg: '#e74c3c'
                    }
                }
            },
            hoodie: {
                name: 'Sudadera',
                colors: {
                    white: {
                        name: 'Blanca',
                        url: 'https://i.postimg.cc/LXHLgtNB/1756859894.png',
                        bg: '#ffffff'
                    },
                    black: {
                        name: 'Negra',
                        url: 'https://i.postimg.cc/50nvBXrc/1756859942.png',
                        bg: '#000000'
                    },
                    green: {
                        name: 'Verde',
                        url: 'https://i.postimg.cc/vTKVKpM3/1756859981.png',
                        bg: '#2ecc71'
                    },
                    gray: {
                        name: 'Gris',
                        url: 'https://i.postimg.cc/PrLZDrzc/1756860039.png',
                        bg: '#888888'
                    },
                    blue: {
                        name: 'Azul',
                        url: 'https://i.postimg.cc/MGcKPvX2/1756860399.png',
                        bg: '#1e90ff'
                    },
                    red: {
                        name: 'Roja',
                        url: 'https://i.postimg.cc/2y0sN7XH/1756860946.png',
                        bg: '#e74c3c'
                    }
                }
            }
        };
        
        // Upload area click event
        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });
        
        // File selection
        fileInput.addEventListener('change', handleFileSelection);
        
        // Drag and drop events
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('active');
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('active');
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('active');
            
            if (e.dataTransfer.files.length) {
                fileInput.files = e.dataTransfer.files;
                handleFileSelection();
            }
        });
        
        // Handle file selection
        function handleFileSelection() {
            const file = fileInput.files[0];
            if (!file) return;
            
            // Validaci√≥n de seguridad
            if (!file.type.match('image.*')) {
                alert('Por favor, sube solo archivos de imagen (JPG, PNG, GIF)');
                return;
            }
            
            if (file.size > 100 * 1024 * 1024) { // 100MB
                alert('El archivo es demasiado grande. M√°ximo 100MB');
                return;
            }
            
            selectedFile = file;
            
            // Display file info
            fileName.textContent = file.name;
            fileType.textContent = file.type || 'Desconocido';
            fileSize.textContent = formatFileSize(file.size);
            fileInfo.classList.add('visible');
            
            // Create image preview if it's an image
            if (file.type.match('image.*')) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    uploadedDesign.style.backgroundImage = `url(${e.target.result})`;
                    uploadedDesign.classList.add('visible');
                    noDesign.style.display = 'none';
                    
                    // Reset to center position
                    resetDesignPosition();
                };
                reader.readAsDataURL(file);
            } else {
                // For non-image files, show a generic icon
                uploadedDesign.style.backgroundImage = 'url("https://placehold.co/150x150/cccccc/666666?text=üìÅ")';
                uploadedDesign.classList.add('visible');
                noDesign.style.display = 'none';
                
                // Reset to center position
                resetDesignPosition();
            }
            
            // Show controls
            controls.classList.add('visible');
        }
        
        // Format file size
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        // Reset design to center position
        function resetDesignPosition() {
            const container = previewContainer;
            const containerWidth = container.offsetWidth;
            const containerHeight = container.offsetHeight;
            const designWidth = parseInt(size.value);
            const designHeight = parseInt(size.value);
            
            uploadedDesign.style.left = `${containerWidth / 2}px`;
            uploadedDesign.style.top = `${containerHeight / 2}px`;
            uploadedDesign.style.width = `${designWidth}px`;
            uploadedDesign.style.height = `${designHeight}px`;
            uploadedDesign.style.transform = 'translate(-50%, -50%)';
            
            // Update sliders
            posX.value = containerWidth / 2;
            posY.value = containerHeight / 2;
        }
        
        // Design movement with mouse - START
        uploadedDesign.addEventListener('mousedown', startDrag);
        
        function startDrag(e) {
            if (!uploadedDesign.classList.contains('visible')) return;
            
            isDragging = true;
            uploadedDesign.classList.add('dragging');
            
            const containerRect = previewContainer.getBoundingClientRect();
            const designRect = uploadedDesign.getBoundingClientRect();
            
            // Calculate offset from the center of the design
            offsetX = e.clientX - (designRect.left + designRect.width / 2);
            offsetY = e.clientY - (designRect.top + designRect.height / 2);
            
            e.preventDefault();
        }
        
        function drag(e) {
            if (!isDragging) return;
            
            const container = previewContainer;
            const containerRect = container.getBoundingClientRect();
            const designWidth = uploadedDesign.offsetWidth;
            const designHeight = uploadedDesign.offsetHeight;
            
            // Calculate new position (center of the design)
            let newCenterX = e.clientX - offsetX;
            let newCenterY = e.clientY - offsetY;
            
            // Constrain within container
            const minX = designWidth / 2;
            const maxX = containerRect.width - designWidth / 2;
            const minY = designHeight / 2;
            const maxY = containerRect.height - designHeight / 2;
            
            newCenterX = Math.max(minX, Math.min(newCenterX, maxX));
            newCenterY = Math.max(minY, Math.min(newCenterY, maxY));
            
            // Update position (using center as reference)
            uploadedDesign.style.left = `${newCenterX}px`;
            uploadedDesign.style.top = `${newCenterY}px`;
            
            // Update sliders
            posX.value = Math.round(newCenterX);
            posY.value = Math.round(newCenterY);
        }
        
        function stopDrag() {
            if (isDragging) {
                isDragging = false;
                uploadedDesign.classList.remove('dragging');
            }
        }
        
        // Add mouse event listeners to the document
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', stopDrag);
        
        // Prevent default behavior for better drag experience
        uploadedDesign.addEventListener('dragstart', (e) => {
            e.preventDefault();
        });
        
        // Slider controls
        posX.addEventListener('input', () => {
            if (uploadedDesign.classList.contains('visible')) {
                const container = previewContainer;
                const containerWidth = container.offsetWidth;
                const val = parseInt(posX.value);
                
                // Constrain value
                const constrainedVal = Math.max(0, Math.min(val, containerWidth));
                
                uploadedDesign.style.left = `${constrainedVal}px`;
            }
        });
        
        posY.addEventListener('input', () => {
            if (uploadedDesign.classList.contains('visible')) {
                const container = previewContainer;
                const containerHeight = container.offsetHeight;
                const val = parseInt(posY.value);
                
                // Constrain value
                const constrainedVal = Math.max(0, Math.min(val, containerHeight));
                
                uploadedDesign.style.top = `${constrainedVal}px`;
            }
        });
        
        size.addEventListener('input', () => {
            if (uploadedDesign.classList.contains('visible')) {
                const newSize = parseInt(size.value);
                const container = previewContainer;
                const containerWidth = container.offsetWidth;
                const containerHeight = container.offsetHeight;
                
                // Constrain size
                const maxSize = Math.min(containerWidth, containerHeight);
                const constrainedSize = Math.max(50, Math.min(newSize, maxSize));
                
                // Get current center position
                const currentLeft = parseFloat(uploadedDesign.style.left) || containerWidth / 2;
                const currentTop = parseFloat(uploadedDesign.style.top) || containerHeight / 2;
                
                // Update size
                uploadedDesign.style.width = `${constrainedSize}px`;
                uploadedDesign.style.height = `${constrainedSize}px`;
                
                // Ensure it stays within bounds after resizing
                const halfSize = constrainedSize / 2;
                const boundedLeft = Math.max(halfSize, Math.min(currentLeft, containerWidth - halfSize));
                const boundedTop = Math.max(halfSize, Math.min(currentTop, containerHeight - halfSize));
                
                uploadedDesign.style.left = `${boundedLeft}px`;
                uploadedDesign.style.top = `${boundedTop}px`;
                
                // Update sliders if needed
                if (boundedLeft !== currentLeft) {
                    posX.value = boundedLeft;
                }
                if (boundedTop !== currentTop) {
                    posY.value = boundedTop;
                }
            }
        });
        
        // Product type selection
        tshirtBtn.addEventListener('click', () => {
            changeProductType('tshirt');
        });
        
        hoodieBtn.addEventListener('click', () => {
            changeProductType('hoodie');
        });
        
        function changeProductType(productType) {
            currentProductType = productType;
            
            // Update active button
            tshirtBtn.classList.toggle('active', productType === 'tshirt');
            hoodieBtn.classList.toggle('active', productType === 'hoodie');
            
            // Generate color buttons for the selected product
            generateColorButtons();
            
            // Set first color as default
            const firstColorKey = Object.keys(products[productType].colors)[0];
            changeColor(firstColorKey);
        }
        
        function generateColorButtons() {
            colorButtonsContainer.innerHTML = '';
            
            const colors = products[currentProductType].colors;
            
            Object.keys(colors).forEach(colorKey => {
                const color = colors[colorKey];
                const button = document.createElement('button');
                button.className = `color-btn ${colorKey}`;
                button.textContent = color.name;
                button.dataset.color = colorKey;
                button.addEventListener('click', () => {
                    changeColor(colorKey);
                });
                colorButtonsContainer.appendChild(button);
            });
        }
        
        function changeColor(colorKey) {
            const color = products[currentProductType].colors[colorKey];
            previewImage.src = color.url;
            
            // Update active state on buttons
            document.querySelectorAll('.color-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const activeButton = document.querySelector(`.color-btn[data-color="${colorKey}"]`);
            if (activeButton) {
                activeButton.classList.add('active');
            }
        }
        
        // Initialize with tshirt
        changeProductType('tshirt');
        
        // Send button click - Open WhatsApp directly
        sendBtn.addEventListener('click', () => {
            if (!selectedFile) {
                alert('Por favor, selecciona un archivo primero');
                return;
            }
            
            // Get current design details
            const productName = products[currentProductType].name;
            const colorName = document.querySelector('.color-btn.active')?.textContent || 'No especificado';
            
            // Create WhatsApp message
            const message = `Hola! Quisiera encargar una ${productName.toLowerCase()} personalizada en color ${colorName}. Adjunto mi dise√±o.`;
            
            // Open WhatsApp with pre-filled message
            const whatsappUrl = `https://wa.me/34627157018?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        });
    </script>
</body>
</html>
```
